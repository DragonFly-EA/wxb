<footer>

    <div class="footer-wrapper">
        <div class="container-rigid">
            <div class="footer-trip-planning-wrapper">
                <h3>Start planning your next trip</h3>
                <ul>
                    <li data-aos=""><a href="https://flights.rwandair.com/en/flights-to-africa/" target="_blank">
                            <figure><img src="{{asset('assets/site/images/continent-africa.svg')}}"></figure>
                            <p>Flight to Africa</p><i class="fi fi-rr-angle-small-right"></i></a></li>
                    <li data-aos=""><a href="https://flights.rwandair.com/en/flights-to-europe/" target="_blank">
                            <figure><img src="{{asset('assets/site/images/continent-europe.svg')}}"></figure>
                            <p>Flight to Europe</p><i class="fi fi-rr-angle-small-right"></i></a></li>
                    <li data-aos=""><a href="https://flights.rwandair.com/en/flights-to-asia/" target="_blank">
                            <figure><img src="{{asset('assets/site/images/continent-asia.svg')}}"></figure>
                            <p>Flight to Asia</p><i class="fi fi-rr-angle-small-right"></i></a></li>
                    <li data-aos=""><a href="https://flights.rwandair.com/en/flights-to-middleeast/"
                                       target="_blank">
                            <figure><img src="{{asset('assets/site/images/continent-middle-east.svg')}}"></figure>
                            <p>Flight to Middle East</p><i class="fi fi-rr-angle-small-right"></i></a></li>
                    <li data-aos=""><a href="https://flights.rwandair.com/en/flights-to-americas/" target="_blank">
                            <figure><img src="{{asset('assets/site/images/continent-america.svg')}}"></figure>
                            <p>Flight to America</p><i class="fi fi-rr-angle-small-right"></i></a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bg-color">

            <div class="container-rigid">

                <div class="footer-main-links">
                    <div class="footer-main-links-columns" data-aos="">
                        <h4>About Us</h4>
                        <ul>
                            <li><a href="about-us.html">Who We Are</a></li>
                            <li><a href="fleet.html">Fleet</a></li>
                            <li><a href="partnership.html">Partners</a></li>
                            <li><a href="careers.html">Careers</a></li>
                            <li><a href="awards.html">Awards</a></li>
                            <li><a href="sustainability.html">Sustainability</a></li>
                            <li><a href="media-center.html">Media Center</a></li>
                        </ul>
                    </div>

                    <div class="footer-main-links-columns" data-aos="">
                        <h4>Destinations</h4>
                        <ul>
                            <li><a href="https://flights.rwandair.com/en/flights-to-africa/"
                                   target="_blank">Africa</a></li>
                            <li><a href="https://flights.rwandair.com/en/flights-to-europe/"
                                   target="_blank">Europe</a></li>
                            <li><a href="https://flights.rwandair.com/en/flights-to-asia/" target="_blank">Asia</a>
                            </li>
                            <li><a href="https://flights.rwandair.com/en/flights-to-middleeast/" target="_blank">Middle
                                    East</a></li>
                            <li><a href="https://flights.rwandair.com/en/flights-to-americas/"
                                   target="_blank">America</a>
                            </li>
                            <li><a href="route-map.html">Route Map</a></li>
                        </ul>
                    </div>

                    <div class="footer-main-links-columns" data-aos="">
                        <h4>Help</h4>
                        <ul>
                            <li><a href="contact-us.html">Contact Us</a></li>
                            <li><a href="help-center.html">FAQs</a></li>
                            <li><a href="seat.html">Seat Selection</a></li>
                            <li><a href="special-assistance.html">Special Assistance</a></li>
                        </ul>
                    </div>

                    <div class="footer-main-links-columns" data-aos="">
                        <h4>Cargo Solutions</h4>
                        <ul>
                            <li><a href="https://flyingwithdragonfly.com/cargo/" target="_blank">Rwandair Cargo</a>
                            </li>
                            <li><a href="https://flyingwithdragonfly.com/cargo/" target="_blank">Cargo Tracking</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="social-apps-wrapper">
                    <div class="social-apps-columns">
                        <p>Travel Made Simpler.</p>
                        <p>Book and manage flights on the go!</p>
                    </div>

                    <div class="social-apps-columns">
                        <ol>
                            <li>
                                <a href="https://play.google.com/store/apps/details?id=com.amadeus.mercimdp.wb&hl=en&gl=US;"
                                   target="_blank">
                                    <figure><img src="{{asset('assets/site/images/google-playstore.png')}}"></figure>
                                </a></li>
                            <li><a href="https://apps.apple.com/us/app/rwandair/id1455608534" target="_blank">
                                    <figure><img src="{{asset('assets/site/images/app-store.png')}}"></figure>
                                </a></li>
                        </ol>
                    </div>

                    <div class="social-apps-columns">
                        <ol>
                            <li><a href="awards.html">
                                    <figure><img src="{{asset('assets/site/images/skytrax-award.png')}}"></figure>
                                </a></li>
                            <li><a href="awards.html">
                                    <figure><img src="{{asset('assets/site/images/apex-award.png')}}"></figure>
                                </a></li>
                        </ol>
                    </div>

                    <div class="social-apps-columns">
                        <ul>
                            <li><p>Follow Us</p></li>
                            <li><a href="https://www.linkedin.com/company/flyrwandair/" target="_blank"><i
                                        class="fa-brands fa-linkedin-in"></i> </a></li>
                            <li><a href="https://twitter.com/FlyRwandAir" target="_blank"><i
                                        class="fa-brands fa-x-twitter"></i></a></li>
                            <li><a href="https://www.facebook.com/FlyRwandAir/" target="_blank"><i
                                        class="fa-brands fa-facebook-f"></i></a></li>
                            <li><a href="https://www.instagram.com/flyrwandair/" target="_blank"><i
                                        class="fa-brands fa-instagram"></i></a></li>
                            <li><a href="https://www.youtube.com/user/flyrwandair" target="_blank"><i
                                        class="fa-brands fa-youtube"></i></a></li>
                        </ul>
                    </div>
                </div>

                <div class="important-footer-bottom-links">
                    <ul>
                        <li><a href="privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="legal.html">Legal</a></li>
                        <li><a href="sustainability.html">Sustainability</a></li>
                        <li><a href="contract.html">Contract of Carriage</a></li>
                        <li><a href="cookies.html">Cookies, Privacy, & Security</a></li>
                    </ul>
                </div>
            </div>
        </div>


    </div>

    <div class="back-to-top-wrapper">
        <a href="#" class="go-top"><p>Go Top</p> <i class="fas fa-arrow-up"></i></a>
    </div>

</footer><!-- #footer -->

</main><!-- #main -->


<!-- Scripts -->
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css"
      href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>

{{--<link rel="stylesheet" type="text/css"--}}
{{--      href="https://staysure.susa.uk/_william_dev/hotel-datepicker/dist/css/hotel-datepicker.css"/>--}}
<script type="text/javascript" src="{{asset('assets/site/js/jquery-3.7.1.min.js')}}"></script>
<script type="text/javascript" src="{{asset('assets/site/js/gsap.min.js')}}"></script>
<script type="text/javascript" src="{{asset('assets/site/js/ScrollMagic.min.js')}}"></script>
<script src="https://kit.fontawesome.com/0c32daa30d.js" crossorigin="anonymous"></script>
{{--<script type="text/javascript"--}}
{{--        src="https://staysure.susa.uk/_william_dev/hotel-datepicker/fecha.min.js"></script>--}}
{{--<script type="text/javascript"--}}
{{--        src="https://staysure.susa.uk/_william_dev/hotel-datepicker/dist/js/hotel-datepicker.js"></script>--}}

{{--<script type="text/javascript">--}}
{{--    (function () {--}}
{{--        var demo3 = new HotelDatepicker(--}}
{{--            document.getElementById("demo3"), {--}}

{{--                format: 'dddd D MMM YYYY',--}}
{{--                inline: false,--}}
{{--                clearButton: true,--}}
{{--                submitButton: true,--}}
{{--                topbarPosition: 'bottom',--}}
{{--                autoClose: false,--}}
{{--                submitButtonName: 'submit',--}}


{{--            },--}}
{{--        );--}}
{{--        var open_datepicker_button =--}}
{{--            document.getElementById("open-datepicker");--}}

{{--        open_datepicker_button.addEventListener(--}}
{{--            "click",--}}
{{--            open_datepicker_function--}}
{{--        );--}}

{{--        function open_datepicker_function() {--}}
{{--            console.log("Open!");--}}
{{--            demo3.open();--}}
{{--        }--}}
{{--    })();--}}


{{--    document.getElementById("close-demo3").textContent = "Select Dates";--}}
{{--</script>--}}

<!-- Custom scripts -->
<script src="{{asset('assets/site/js/aos.js')}}" type="text/javascript"></script>
<script src="{{asset('assets/site/js/easyResponsiveTabs.js')}}" type="text/javascript"></script>
<script src="{{asset('assets/site/js/jquery.bxslider.js')}}"></script>
<script type="text/javascript" src="{{asset('assets/site/js/jquery.nice-select.js')}}"></script>
<script type="text/javascript" src="{{asset('assets/site/js/script.js')}}"></script>

<!-- Debugging scripts, if needed -->
<script src="{{asset('assets/site/js/debug.addIndicators.min.js')}}"></script>


<script>

    var airports = [];
    var fullDeals = [];

    var destinations = [{
        city: "DAR",
        destination: "KGL"
    },
        {
            city: "LGW",
            destination: "LOS"
        },
        {
            city: "KGL",
            destination: "NBO"
        },
        {
            city: "LGW",
            destination: "JNB"
        }
    ];

    var destinations2 = [{
        city: "KGL",
        destination: "BOM"
    },
        {
            city: "KGL",
            destination: "LGW"
        },
        {
            city: "LOS",
            destination: "LGW"
        },
        {
            city: "DXB",
            destination: "LOS"
        }
    ];

    function getDestinations(destinations, outputElementId) {
        $.getJSON("https://flyingwithdragonfly.com/dist/phoenix/V1.0/phpActions/retrieveAirportsInfo.php", function (results) {
            $.getJSON("https://flyingwithdragonfly.com/dist/phoenix/V1.0/db/countries.json", function (countriesData) {
                countries = countriesData;
                $.getJSON("https://flyingwithdragonfly.com/dist/phoenix/V1.0/db/routeFares.json", function (routeFares) {
                    fullDeals = routeFares.deals;
                    airports = results;
                    get_json(airports, countries, fullDeals, destinations, outputElementId);
                });
            });
        });
    }

    //data = airports
    function get_json(data, countries, fullDeals, destinations, outputElementId) {
        result = data.reduce(function (r, a) {
            r[a.iso_country] = r[a.iso_country] || [];
            r[a.iso_country].push(a);
            return r;
        }, Object.create(null));

        var output = document.getElementById(outputElementId);
        output.innerHTML = ""; // Clear previous content before appending new data
        var dealsFound = false;

        Object.entries(result).forEach(([key, value]) => {
            try {
                var label = countries.find((x) => x.code === key).name;
                value.map((y) => {
                    var deals = data.filter((a) =>
                        fullDeals
                            .find((a) => a.city === y.iata_code)
                            .routes.map((a) => a.city)
                            .includes(a.iata_code)
                    );
                    // Filter deals based on destinations
                    var filteredDeals = deals.filter((deal) =>
                        destinations.some(
                            (dest) =>
                                dest.city === y.iata_code &&
                                dest.destination === deal.iata_code
                        )
                    );

                    var outputCountryCityAirport = `${y.municipality}`;
                    if (filteredDeals.length > 0) {
                        output.innerHTML += filteredDeals
                            .map((deal, index) => {
                                var priceFrom = getDealPriceFrom(y.iata_code, deal.iata_code);
                                return `<li>
                                            <a href="https://flights.rwandair.com/en/flights-from-${y.municipality.replace(/\s+/g, "-")}-to-${deal.municipality}" target="_blank" class="mb-3">
                                                <h4 class="m-0">${outputCountryCityAirport} to ${deal.municipality}</h4>
                                                    <span>
                                                        <p>From</p>
                                                        <h5>${priceFrom}</h5>
                                                    </span>
                                                </a>
                                            </li>`;
                            })
                            .join("");
                        dealsFound = true;
                    }
                });
            } catch (e) {
                console.log(e);
            }
        });

        if (!dealsFound) {
            get_json(data, countries, fullDeals, destinations, outputElementId);
        }
    }

    getDestinations(destinations, "output1");
    getDestinations(destinations2, "output2");

    function getDealPriceFrom(city, iata_code) {
        var fullDeal = fullDeals.find((d) => d.city === city);

        if (fullDeal && fullDeal.routes) {
            var route = fullDeal.routes.find((r) => r.city === iata_code);
            if (route) {
                return route.priceFrom;
            }
        }
        return "";
    }
</script>
</body>
</html>
